specVersion: 0.0.4
description: Cartesi Rollups
repository: "https://github.com/cartesi/subgraph"
schema:
    file: ./schema.graphql
dataSources:
    - kind: ethereum/contract
      name: CartesiDAppFactory
      network:
      source:
          address: CartesiDAppFactory
          abi: CartesiDAppFactory
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - DApp
              - DAppFactory
              - Dashboard
          abis:
              - name: CartesiDAppFactory
                file:
          eventHandlers:
              - event: "ApplicationCreated(indexed address,(address,bytes32,uint256,uint256,uint256,uint256,address,address[]))"
                handler: handleApplicationCreated
          file: ./src/handlers/v0.6/dapp.ts
    - kind: ethereum/contract
      name: CartesiDAppFactory-0.8
      network:
      source:
          address: "@cartesi/rollups-0.8;deployments/{{network}}/CartesiDAppFactory.json"
          abi: CartesiDAppFactory
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - DApp
              - DAppFactory
              - Dashboard
          abis:
              - name: CartesiDAppFactory
                file: abi/v0.8
          eventHandlers:
              - event: "ApplicationCreated(indexed address,(address,bytes32,uint256,uint256,uint256,uint256,address,address[]))"
                handler: handleApplicationCreated
          file: ./src/handlers/v0.8/dapp.ts
templates:
    - kind: ethereum/contract
      name: CartesiDAppInput
      network:
      source:
          abi: InputFacet
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - DApp
          abis:
              - name: InputFacet
                file:
          eventHandlers:
              - event: "InputAdded(indexed uint256,indexed uint256,address,uint256,bytes)"
                handler: handleInput
          file: ./src/handlers/input.ts
    - kind: ethereum/contract
      name: CartesiDAppRollups
      network:
      source:
          abi: RollupsFacet
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.6
          language: wasm/assemblyscript
          entities:
              - DApp
          abis:
              - name: RollupsFacet
                file:
          eventHandlers:
              - event: "PhaseChange(uint8)"
                handler: handlePhaseChange
          file: ./src/handlers/rollups.ts
